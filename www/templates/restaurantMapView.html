<ion-view title="Live Deals" name="restaurantMapView-u" id="restaurantMapView">
  <ion-content padding="true" class="has-header">


  <input id="searchbar" style="padding:7px;margin-top:0px; width:95%" places-auto-complete size=80
    ng-model="main.address"
    component-restrictions="{country:'irl'}"
    types="{{types}}"
    on-place-changed="main.placeChanged()"
    ng-focus="disableTap()" /> <br/>
  <div ng-show="main.place">
    <!--Address = {{main.place.formatted_address}} <br/>
    Location: {{main.place.geometry.location}}<br/>-->
  </div>
  
	<ng-map center="[{{lat}}, {{long}}]" styles="[{
	featureType:'road.highway',
	elementType:'geometry',
		stylers:[{hue:'yellow'},
	{saturation:60},{lightness:-20}]},
	{featureType:'road.arterial',
	elementType:'all',
		stylers:[{hue:'grey'},
	{lightness:-40},
	{visibility:'simplified'},
	{saturation:30}]},
	{featureType:'road.local',
	elementType:'all',
		stylers:[{hue:'blue'},
	{saturation:50},{gamma:0.7},
	{visibility:'simplified'}]},
	{featureType:'water',
	elementType:'geometry',
		stylers:[{saturation:40},{visibility:'on'},
	{lightness:40}]},
	{featureType:'road.highway',
	elementType:'labels',
		stylers:[{visibility:'off'},
	{saturation:98}]},
	{featureType:'administrative.locality',
	elementType:'labels',
		stylers:[{hue:'#0022ff'},{visibility:'on'},
	{saturation:50},
	{lightness:-10},
	{gamma:0.90}]},
	{featureType:'transit.line',
	elementType:'geometry',
		stylers:[{hue:'yellow'},
	{visibility:'on'},
	{lightness:-70}]}]">
		
		<custom-marker id="{{r.id}}" position="{{r.coords}}"
				on-click="showDetail(r)" ng-repeat="r in restsWithCurrentDeal track by $index">
          <div style="max-width:38px;"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 30 45" style="enable-background:new 0 0 30 45;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#E20613;}
	.st1{fill:#FFFFFF;}
</style>
<path class="st0" d="M14.3,40.8C9.9,27.9,1.1,24.8,1,14.5C0.9,7.7,6.5,1.2,14.1,1.1l1.6,0c7.6-0.1,13,6.3,13.5,13.1
	c0.6,10.5-9.6,13.9-13.9,26.7c0,0-0.1,0.3-0.5,0.3C14.4,41.2,14.3,40.8,14.3,40.8z"/>
<path class="st1" d="M19.7,11.7h5.4c0,0-1.3-7.3-10.8-7.3c0,0-10.2,0.5-9.9,11c0,0,0.3,8.5,10.1,9.4c0,0,12.1-0.3,10.9-11.8
	l-7.7-0.1v4.3l1.9,0c0,0-1.6,3-5.8,2.3c0,0-6.6-1.4-3.5-7.9C10.4,11.7,14.7,6.4,19.7,11.7z"/>
</svg></div>
        </custom-marker>
	<info-window id="iw">
		<div ng-non-bindable="">
			<div style="width: 160px; height:auto; padding:0;">
				<h4 style="text-align: center">{{main.rest.name}}</h4>
				<div style="width:35%; display:inline-block; float:left;">
					<img style="width:80%;"src="https://s3.amazonaws.com/ionic-io-static/EGzQ5CcDS3ODKJcQE11W_Asset 1.png">
				</div>        
				<div style="width:50%;  margin-left: 10%;display:inline-block; float:left;">                   
					<strong>Live Deal: </strong><br>{{main.rest.current_deal.deal_name}}<br><br>
				</div>
				<div>
					
				</div>
			</div>
		</div>
	</info-window>
  </ng-map>
    
  </ion-content>
</ion-view>
